import React, {useEffect, useRef, useState} from 'react';import {Modal,ModalHeader,ModalBody,ModalFooter} from 'reactstrap';import {AvForm,AvField} from 'availity-reactstrap-validation';import {editproduct} from "../../../store/product_reducer";import { connect } from 'react-redux'import {getPost} from "../../../store/product_reducer";import AddBlue from '../../Images/addblue.jpg'import axios from "axios";import {    ImgForm,    Label,    LAbelEdit,    Header,    DivIcon,}from './EditStyled'function EditModal({isOpen,toggle,edit,editproduct,GetApp}) {    const toggles = useRef(null);    const [img,setImg] = useState(null);    function Handel(e) {        const onload = e.target.files[0];        const formData = new FormData();        formData.append("image", onload);        axios({            url: "https://store-management-backend-app.herokuapp.com/api/v1/attachment",            method: "POST",            data: formData,        }).then((res) => {            setImg(res.data)        }).catch((err)=>{            console.log(err);        });    }    function EditsProduct(event,values,) {        editproduct({...values,id:edit.id,imageId:img});        toggle();    }    useEffect(()=>{        GetApp();    },[EditsProduct]);    return (        <Modal isOpen={isOpen} toggle={toggle} >            <ModalBody>                <Header>                    <DivIcon>                        <i className="far fa-edit IconEdit"></i>                        <button onClick={toggle} className={'CancelBtn float-end'}>                            <i className="fas fa-times"></i>                        </button>                    </DivIcon>                </Header>                <AvForm id={'form'} onValidSubmit={EditsProduct} model={edit ? edit : {}} classNamw={'AvLabel'}>                    <LAbelEdit> Имя товара</LAbelEdit>                    <AvField type={'text'} name={'productName'} required/>                    <LAbelEdit>Цена</LAbelEdit>                    <AvField type={'number'} name={'price'} required/>                    <LAbelEdit>Количество</LAbelEdit>                    <AvField type={'number'} name={'amount'} required/>                    <LAbelEdit>Информация о товаре</LAbelEdit>                    <AvField type={'text'} name={'description'} required/>                </AvForm>                <ImgForm>                    <Label htmlFor={'image'}>                        {                            img ? <div>                                {                                    img ?                                        <img src={`https://store-management-backend-app.herokuapp.com/api/v1/attachment/${img}`}                                             width={130} height={130}  />                                         :                                        <div className={'loaders'}>                                        </div>                                }                            </div>                                :                                <img src={AddBlue} alt="" width={130} height={130} />                        }                    </Label>                </ImgForm>                <input type="file" ref={toggles} onChange={Handel} className={"m-5 d-none"} id={"image"}/>            </ModalBody>            <ModalFooter className={'ModalFooter'}>                <button form={'form'} className={' SaveBtn'} >Сохранить</button>            </ModalFooter>        </Modal>    )}export default connect(null,{editproduct}) (EditModal);